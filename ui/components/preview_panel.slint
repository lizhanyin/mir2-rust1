// 右侧预览面板组件
// 显示当前选中的图像预览

import { FontSettings, Colors } from "../theme.slint";

export component PreviewPanel inherits Rectangle {
    // 属性
    in property <int> current_index: -1;
    in property <image> main_preview;
    in property <bool> preview_bg_light: false;
    // 缩放比例 (50-200)
    in property <int> zoom_scale: 100;

    // 计算后的图像尺寸 (基础尺寸 380px)
    property <length> scaled_size: 180px * root.zoom_scale / 100;
    // 画布容器尺寸
    property <length> canvas_size: 200px * root.zoom_scale / 100;
    background: root.preview_bg_light ? #ffffff : #1a1a1a;
    VerticalLayout {
        spacing: 0px;

        // 预览画布
        Rectangle {
            HorizontalLayout {
                alignment: center;
                Rectangle {
                    width: root.canvas_size;
                    height: root.canvas_size;
        
                    // 显示图像或占位符
                    if root.current_index >= 0: Rectangle {
                        background: root.preview_bg_light ? #ffffff : #1a1a1a;
        
                        // 显示实际图像预览
                        if root.main_preview.width > 0: Image {
                            source: root.main_preview;
                            width: root.scaled_size;
                            height: root.scaled_size;
                            image-fit: contain;
                        }
                    }
                    if root.current_index < 0: Rectangle {
                        background: Colors.bg-primary;
                        x: 551px;
                        y: 109px;
                        Text {
                            text: "请选择一张图像";
                            color: Colors.text-disabled;
                            horizontal-alignment: center;
                            vertical-alignment: center;
                            font-family: FontSettings.chinese-font;
                            font-size: 14px;
                        }
                    }
                }
            }
        }
    }
}
